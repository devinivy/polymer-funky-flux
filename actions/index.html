<link rel="import" href="../bower_components/funk/funk.html">
<link rel="import" href="../api/shop.html">

<script>

var Actions = Funk.Reflux.createActions({
    getProducts: { asyncResult: true },
    addToCart: {},
    cartCheckout: { asyncResult: true }
});

Actions.getProducts.listen(function() {

    var self = this;

    Shop.getProducts(function(err, products) {
        if (err) {
            return self.failed(err, products);
        }
        self.completed(products);
    });
});

Actions.cartCheckout.listen(function(products) {

    var self = this;

    Shop.buyProducts(products, function(err) {
        if (err) {
            return self.failed(err);
        }
        self.completed();
    });
});

</script>
